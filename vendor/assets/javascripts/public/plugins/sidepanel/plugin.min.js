!function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;o<e.length;++o){if(n=a[e[o]]||i(e[o]),!n)throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){var r,i,o,s,l;for(r=0;r<n.length;r++){i=e,o=n[r],s=o.split(/[.\/]/);for(var c=0;c<s.length-1;++c)i[s[c]]===t&&(i[s[c]]={}),i=i[s[c]];i[s[s.length-1]]=a[o]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(o in a)l[o]=a[o];for(r=0;r<n.length;r++)delete l[n[r]];e.privateModules=l}}var a={};r("tinymce/ui/SidePanelHeader",["tinymce/ui/TabPanel","tinymce/dom/DomQuery"],function(e,t){return e.extend({recalc:function(){},render:function(){var e=this,n=e.getEl("body"),r=e.getEl("head"),i=e.classPrefix;e.items().each(function(o,a){if(o.parent(e),!o.state.get("rendered")){var s=e._id+"-t"+a,l='<div id="'+s+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+o._id+'" aria-selected="false" tabIndex="-1">'+e.encode(o.settings.title)+"</div>";o.aria("role","tabpanel"),o.aria("labelledby",s),n.hasChildNodes()&&a<=n.childNodes.length-1?(t(n.childNodes[a]).before(o.renderHtml()),t(r.childNodes[a]).before(l)):(t(n).append(o.renderHtml()),t(r).append(l)),o.on("remove",function(){e._elmCache[s]=null,t("#"+s).remove()}),o.postRender()}})}})}),r("tinymce/plugins/sidepanel/Plugin",["tinymce/ui/SidePanelHeader","tinymce/dom/DomQuery","tinymce/dom/DOMUtils"],function(e,t,n){var r=function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}};tinymce.PluginManager.add("sidepanel",function(e,t){var i,o,a={};window.NodeList&&(tinymce.DOM.styleSheetLoader.load(t+"/css/sidepanel.css"),e.on("BeforeRenderUI",function(){var t=e.theme;i=t.panel,i.items().each(function(e){if("iframe"===e.name()){var t=tinymce.ui.Factory.create({type:"container",name:"panels-container",style:"position:relative;",layout:"stack",items:[e,{type:"container",name:"left-panel-container",classes:"side-panel-container left",laytout:"stack",width:300,hidden:!0,items:[{type:"sidepanelheader",name:"left-panel",layout:"stack",classes:"tabpanel"},{type:"control",name:"panel-handler",layout:"stack",classes:"resize-handler",html:""}]},{type:"container",name:"right-panel-container",classes:"side-panel-container right",laytout:"stack",width:300,hidden:!0,items:[{type:"sidepanelheader",name:"right-panel",layout:"stack",classes:"tabpanel"},{type:"control",name:"panel-handler",layout:"stack",classes:"resize-handler",html:""}]}]});i.replace(e,t),o=e}}),a.left=i.find("#left-panel")[0],a.right=i.find("#right-panel")[0];var s=i.find("#panel-handler");s.on("postrender",function(e){var t,i=e.control,a=i.parent();t="left",(a._name.startsWith(t)||(t="right",a._name.startsWith(t)))&&(i.resizeDragHelper=new tinymce.ui.DragHelper(i._id,{start:function(){i.resizeDragHelper.startDragW=r(a.getEl()).width},drag:function(e){var t,r,s,l=i.resizeDragHelper.side;r=parseInt(n.DOM.getStyle(a.getEl(),"max-width",!0),10)||a.parent().layoutRect().w,s=parseInt(n.DOM.getStyle(a.getEl(),"min-width",!0),10)||0,t=i.resizeDragHelper.startDragW+e.deltaX,t<r&&t>s&&(n.DOM.setStyle(a.getEl(),"width",t+"px"),n.DOM.setStyle(o.getEl(),"margin-"+l,t+"px"))},stop:function(){}}),i.resizeDragHelper.side=t)})}),e.on("AddSidePanel",function(e){var t,r,i;t=e.side&&"right"==e.side?"right":"left",r=e.panel||e.item,r.classes.add("side-panel"),a[t].append(r).reflow();var s=a[t].getEl("head"),l=n.DOM.createFragment(a[t].renderHtml()).firstChild.firstChild;if(l.id==s.id&&(s.innerHTML=l.innerHTML),a[t].activateTab(a[t].items().length-1),i=a[t].parent(),!i.visible()){i.show();var c=i.layoutRect().w;n.DOM.setStyle(o.getEl(),"margin-"+t,c+"px")}}),e.on("DeleteSidePanel",function(e){var t,r,i;if(e.name)t=e.name;else if(e.panel)t=e.panel.name();else{if(!e.item)return;t=e.item.name()}i="left",r=a[i].find("#"+t)[0],(r||(i="right",r=a[i].find("#"+t)[0]))&&(r.remove(),0==a[i].items().length&&(a[i].parent().hide(),n.DOM.setStyle(o.getEl(),"margin-"+i,"0px")))}))})}),o(["tinymce/ui/SidePanelHeader","tinymce/plugins/sidepanel/Plugin"])}(window);