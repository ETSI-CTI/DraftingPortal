!function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;o<e.length;++o){if(n=a[e[o]]||i(e[o]),!n)throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){var r,i,o,s,l;for(r=0;r<n.length;r++){i=e,o=n[r],s=o.split(/[.\/]/);for(var c=0;c<s.length-1;++c)i[s[c]]===t&&(i[s[c]]={}),i=i[s[c]];i[s[s.length-1]]=a[o]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(o in a)l[o]=a[o];for(r=0;r<n.length;r++)delete l[n[r]];e.privateModules=l}}var a={};r("tinymce/plugins/localfile",[],function(){tinymce.PluginManager.add("localfile",function(e){function t(t,r){var i=document.createElement("input");i.id="__browseFiles",i.style.display="none",i.type="file",i.accept="text/*",i.addEventListener("change",r,!1),i.onclick=n;var o=e.getElement();o.parentNode.insertBefore(i,null),i.click()}function n(e){e.target.parentNode.removeChild(e.target)}function r(){t(null,a)}function i(){l?s(l):o()}function o(){e.windowManager.open({title:"Document Name",body:{type:"textbox",name:"name",size:40,label:"Name",value:l?l:""},onsubmit:function(e){var t=e.data.name;t.match(/.*\.html?/i)||(t+=".html"),s(t)}})}function a(t){function n(t){return function(n){var r=n.target.result;if("TextDecoder"in window){var i=new DataView(n.target.result),o=new TextDecoder;r=o.decode(i);var a=r.match(/<meta\s+http-equiv=Content-Type.*charset=([\w\-]*)/);!a||!a[1]||a[1]in["unicode-1-1-utf-8","utf-8","utf8"]||(o=new TextDecoder(a[1]),r=o.decode(i))}e.setContent(r),e.undoManager.clear(),l=t.name}}for(var r,i=t.target.files,o=0;r=i[o];o++)if(r.type.match("text.*")){var a=new FileReader;a.onload=n(r),a.readAsArrayBuffer(r);break}}function s(t){var r=new Blob([e.save()],{type:"text/html"}),i=document.createElement("a");i.href=URL.createObjectURL(r),i.download=t,e.getElement().parentNode.insertBefore(i,null),i.onclick=n,i.click(),l=t}var l=null;e.addCommand("mceLocalOpen",r),e.addCommand("mceLocalSave",i),e.addCommand("mceLocalSaveAs",o),e.addMenuItem("localOpen",{text:"Open",cmd:"mceLocalOpen",icon:"Open",shortcut:"Meta+O",context:"file"}),e.addMenuItem("localSave",{text:"Save",cmd:"mceLocalSave",icon:"Save",shortcut:"Meta+S",context:"file"}),e.addMenuItem("localSaveAs",{text:"SaveAs",cmd:"mceLocalSaveAs",icon:"SaveAs",context:"file"})})}),o(["tinymce/plugins/localfile"])}(window);