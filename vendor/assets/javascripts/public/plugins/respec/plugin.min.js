!function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;o<e.length;++o){if(n=a[e[o]]||i(e[o]),!n)throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){var r,i,o,s,l;for(r=0;r<n.length;r++){i=e,o=n[r],s=o.split(/[.\/]/);for(var c=0;c<s.length-1;++c)i[s[c]]===t&&(i[s[c]]={}),i=i[s[c]];i[s[s.length-1]]=a[o]}if(e.AMDLC_TESTS){l=e.privateModules||{};for(o in a)l[o]=a[o];for(r=0;r<n.length;r++)delete l[n[r]];e.privateModules=l}}var a={};r("tinymce/plugins/respec",["tinymce/util/XHR","tinymce/util/URI","tinymce/util/JSON","tinymce/util/Tools"],function(e,n,r,i){tinymce.PluginManager.add("respec",function(o,a){function s(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];u.push({text:t+" - "+n.name,value:t})}}function l(){o.respecConfig==t&&i.extend(o.respecConfig,f);var e=o.respecConfig,n=o.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){o.focus()},onSubmit:function(){function t(n){for(var r=0;r<n.length;r++){var i=n[r];e.hasOwnProperty(i.name())?e[i.name()]=i.value():i.items&&i.items().length&&t(i.items())}}t(n.items()),o.focus()},title:"Publishing properties",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"container",label:"Specification ",layout:"flex",align:"center",spacing:2,items:[{type:"label",text:"ETSI "},{type:"combobox",name:"specType",size:2,value:e.specType,menu:d},{type:"textbox",name:"specIndex",size:10,placeholder:"Number",value:e.specIndex},{type:"label",text:"Version "},{type:"textbox",name:"specVersion",size:6,value:e.specVersion}]},{type:"textbox",name:"title",label:"Title",value:e.title},{type:"textbox",name:"subtitle",label:"Subtitle",value:e.subtitle},{type:"combobox",name:"wg",label:"Working Group",value:e.wg,menu:u}]}})}var c={},u=[],d=[{value:"EN",text:"EN - ETSI European Standard (Norm)"},{value:"ES",text:"ES - ETSI Standard"},{value:"EG",text:"EG - ETSI Guide"},{value:"GS",text:"GS - ETSI Group Specification"},{value:"TS",text:"TS - ETSI Technical Specification"},{value:"TR",text:"TR - ETSI Technical Report"},{value:"SR",text:"SR - ETSI Special Report"}],f={wg:"",specStatus:"WD",specType:"TS",specIndex:"",title:"",subtitle:"",specVersion:"0.0.1",editors:[{name:"ETSI Secretariat",url:"http://www.etsi.org",company:"ETSI",companyURL:"http://www.etsi.org/"}]},p=/var\s+respecConfig\s*=\s*({.*})/gm;if(a.startsWith("file://"))c={ITS:{name:"Intelligent Transport System",url:"http://www.etsi.org/index.php/technologies-clusters/technologies/intelligent-transport"},INT:{name:"Core Network and Interoperability Testing",url:"https://portal.etsi.org/tb.aspx?tbid=715&SubTB=715"},NFV:{name:"Network Functions Virtualization",url:"https://portal.etsi.org/tb.aspx?tbid=789&SubTB=789"}},s(c);else{var m=function(e){};e.send({url:new n(a).toAbsolute("wg-list.json"),success:function(e){if(e=r.parse(e))e.error?m(e.error):(c=e,s(e));else{var t=o.translate("Server response wasn't proper JSON.");m(t)}},error:function(){var e=o.translate("The WG List request was filed:");m(e)}})}o.on("BeforeSetContent",function(e){var t,n,i=e.content,a=Object.assign({},f);if(t=i.indexOf("<body"),t>0&&(t=i.indexOf(">",t),n=i.indexOf("</body>",t),e.content=i.substring(t+1,n)),t=i.indexOf("<head"),t>0){n=i.indexOf("</head>",t);var s=o.dom.createFragment(i.substr(t,n+7)),l="";d=s.querySelector("title"),d&&(l=d.textContent);for(var c=s.querySelectorAll("script"),u=0;u<c.length;u++)if(d=c[u].innerHTML){var d=p.exec(d.replace(/\s+/g," "));d&&d[1]&&(d=r.parse(d[1]),d&&d.specType&&d.specIndex&&(a=d,a.title=l))}}o.respecConfig=a}),o.on("PrepareHeadHtml",function(e){var t=o.settings.respecScript||"respec-etsi-debug.js";e.headHtml=e.headHtml+"<script src='"+t+"' async class='remove'></script>\n<script class='remove'>\n  var respecConfig = "+r.serialize(o.respecConfig)+";\n</script>\n<title> "+o.respecConfig.title+"</title>\n"}),o.on("SaveContent",function(e){var t="<!DOCTYPE html>\n<html><head>\n  <meta charset='utf-8'>\n";o.fire("PrepareHeadHtml",{headHtml:t}),t+="</head>\n",e.content=t+"<body>\n"+e.content+"\n</body>\n</html>\n"}),o.addButton("docproperties",{icon:"anchor",tooltip:"Publishing properties",onclick:l})})}),o(["tinymce/plugins/respec"])}(window);